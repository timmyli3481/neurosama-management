query GetTeamInfo($number: Int!, $season: Int! = 2025) {
  teamByNumber(number: $number) {
    ...TeamCoreFragment

    events(season: $season) {
      awards { ...AwardFields }
      event { ...EventFragment }

      matches {
        ...TeamMatchParticipationCore
        match { ...MatchCoreFragment }
      }
    }
  }
}

# Query for fetching event data without team information
query GetEventBasicInfo( $code: String!,$season: Int! = 2025) {
  eventByCode(season: $season, code: $code) {
    ...EventFragment
  }
}

# =========================
# 1) TEAM FRAGMENTS
# =========================

# TeamCoreFragment: Basic team identification info only.
# Use this for lightweight team references and connections.
fragment TeamCoreFragment on Team {
  number
  name
  schoolName
  rookieYear
  website
  location { ...LocationFields }

  quickStats(season: 2025) {
    ...QuickStatsFields
  }
}

fragment LocationFields on Location {
  venue
  city
  state
  country
}

fragment QuickStatsFields on QuickStats {
  season
  number
  tot { ...QuickStatFields }
  auto { ...QuickStatFields }
  dc { ...QuickStatFields }
  eg { ...QuickStatFields }
  count
}

fragment QuickStatFields on QuickStat {
  value
  rank
}

# =========================
# 2) EVENT FRAGMENTS
# =========================

# EventCoreFragment: Contains only the core event fields.
# This is what gets saved to the officialEvents table.
# Use this type for database storage.
fragment EventCoreFragment on Event {
  season
  code
  name
  type

  address
  location { ...LocationFields }

  regionCode
  leagueCode
  districtCode
  divisionCode

  start
  end
  timezone

  remote
  hybrid
  fieldCount
  published
  started
  ongoing
  finished
  hasMatches

  website
  liveStreamURL
  webcasts

  createdAt
  updatedAt
}

# EventFragment: Full event data including nested matches and awards.
# Use this for querying - the nested data is saved to separate tables.
fragment EventFragment on Event {
  ...EventCoreFragment

  matches {
    ...MatchFragment
  }

  awards {
    ...AwardFields
  }
}

fragment AwardFields on Award {
  teamNumber
  type
  personName
  placement
  divisionName
}

# =========================
# 3) MATCH FRAGMENTS
# =========================

# MatchCoreFragment: Core match data including teams participation.
# This is what gets saved to the officialMatches table.
fragment MatchCoreFragment on Match {
  season
  eventCode
  id

  tournamentLevel
  series
  matchNum
  description
  hasBeenPlayed

  scheduledStartTime
  actualStartTime
  postResultTime

  createdAt
  updatedAt

  teams {
    ...TeamMatchParticipationCore
  }

  scores {
    ... on MatchScores2025 {
      season
      eventCode
      matchId
      red { ... MatchScores2025AllianceFields }
      blue { ... MatchScores2025AllianceFields }
    }
  }
}

# MatchFragment: Alias for MatchCoreFragment (for backward compatibility)
fragment MatchFragment on Match {
  ...MatchCoreFragment
}

fragment MatchScores2025AllianceFields on MatchScores2025Alliance {
  alliance

  autoLeavePoints
  autoLeave1
  autoLeave2
  autoArtifactPoints
  autoArtifactClassifiedPoints
  autoArtifactOverflowPoints
  autoPatternPoints
  autoClassifierState

  dcBasePoints
  dcBase1
  dcBase2
  dcBaseBonus
  dcArtifactPoints
  dcArtifactClassifiedPoints
  dcArtifactOverflowPoints
  dcPatternPoints
  dcDepotPoints
  dcClassifierState

  movementRp
  goalRp
  patternRp

  autoPoints
  dcPoints

  minorsCommitted
  majorsCommitted
  minorsByOpp
  majorsByOpp
  penaltyPointsCommitted
  penaltyPointsByOpp

  totalPointsNp
  totalPoints
}

# (Optional) A small fragment for the team's *relationship* to a match
# so your query doesn't repeat these fields.
fragment TeamMatchParticipationCore on TeamMatchParticipation {
  season
  eventCode
  matchId
  alliance
  allianceRole
  station
  teamNumber
}
